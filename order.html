<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Order - Shreeâ€™s CleanX</title>
  <link href="/shrees-cleanx/css/styles.css" rel="stylesheet"> <!-- Adjust repo name -->
</head>
<body>
  <nav class="bg-blue text-white padding-4 flex justify-center space-x-6 margin-top-2 margin-bottom-2 rounded shadow-md">
    <a href="index.html"><img src="images/WhatsApp_Image_2025-08-30_at_18.06.53_9ef9f608-removebg-preview.png" class="logo"></a>
    <span class="nav-toggle">&#9776;</span>
    <div class="nav-dropdown">
      <a href="index.html" class="hover-underline font-semibold">Home</a>
      <a href="about.html" class="hover-underline font-semibold">About</a>
      <a href="products.html" class="hover-underline font-semibold">Products</a>
      <a href="order.html" class="hover-underline font-semibold">Order</a>
      <a href="testimonials.html" class="hover-underline font-semibold">Testimonials</a>
      <a href="contact.html" class="hover-underline font-semibold">Contact</a>
    </div>
  </nav>
  <div class="container padding-4">
    <h1 class="text-xl font-bold text-center margin-top-2 margin-bottom-2">Easy Ordering. Honest Prices. Quick Delivery.</h1>
    <h2 class="text-lg font-bold margin-bottom-2">ðŸ“² How to Order</h2>
    <ul class="margin-bottom-2">
      <li class="text-gray-700">WhatsApp your order to <a href="tel:+917302562455" class="hover-underline">7302562455</a></li>
      <li class="text-gray-700">Receive todayâ€™s price list & offers</li>
      <li class="text-gray-700">Choose Home Delivery (Haldwani & nearby) or Pickup</li>
      <li class="text-gray-700">Pay on Delivery (Cash/UPI) or Pre-pay UPI</li>
    </ul>
    <h2 class="text-lg font-bold margin-bottom-2">ðŸ›’ Your Cart</h2>
    <div id="cart" class="padding-4 bg-white rounded shadow-md margin-bottom-2"></div>
    <h3 class="text-lg font-semibold margin-bottom-2">Delivery Option</h3>
    <label>
      <input type="checkbox" id="delivery-checkbox" class="margin-right-2"> Opt for Home Delivery
    </label>
    <div id="address-section" class="margin-top-2" style="display: none;">
      <textarea id="address" class="w-full border padding-4 rounded margin-bottom-2" placeholder="Enter your delivery address" rows="3"></textarea>
    </div>
    <h3 class="text-lg font-semibold margin-bottom-2">Device</h3>
    <div class="margin-bottom-2">
      <label><input type="radio" name="device" value="mobile" checked> Using Mobile</label>
      <label><input type="radio" name="device" value="desktop"> Using Desktop</label>
    </div>
    <p class="text-gray-700 margin-bottom-2">Add more items? Visit the <a href="products.html" class="hover-underline">Products</a> page.</p>
    <button id="order-btn" class="btn">Place Order</button>
  </div>
  <footer class="footer margin-top-2">
    <p>Your Clean, Our Commitment â€” Made by Women, For Every Home</p>
    <p>Â© 2025 Shreeâ€™s CleanX. All rights reserved.</p>
  </footer>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      console.log("Page loaded, checking cart");
      const cart = JSON.parse(localStorage.getItem('cart')) || {};
      const cartDiv = document.getElementById('cart');
      if (Object.keys(cart).length === 0) {
          cartDiv.innerHTML = '<p class="text-gray-700">Your cart is empty. Add items from the <a href="products.html" class="hover-underline">Products</a> page.</p>';
      } else {
          cartDiv.innerHTML = '<h3 class="text-lg font-semibold margin-bottom-2">Items:</h3>' +
              Object.entries(cart).map(([item, qty]) => `
                  <div class="cart-item">
                      <span>${item} (x${qty})</span>
                      <button class="remove-btn" onclick="removeFromCart('${item}')">Remove</button>
                  </div>
              `).join('');
      }

      document.getElementById('delivery-checkbox').addEventListener('change', (e) => {
          document.getElementById('address-section').style.display = e.target.checked ? 'block' : 'none';
      });

      document.getElementById('order-btn').addEventListener('click', () => {
          let orderText = 'Order from Shreeâ€™s CleanX: ';
          if (Object.keys(cart).length > 0) {
              const items = Object.entries(cart).map(([item, qty]) => `${item} (x${qty})`);
              orderText += items.join(', ');
          }
          const isDelivery = document.getElementById('delivery-checkbox').checked;
          const deliveryOption = isDelivery ? 'Home Delivery' : 'Pickup';
          if (isDelivery) {
              const address = document.getElementById('address').value.trim();
              if (address) {
                  orderText += `, Delivery Address: ${address}`;
              }
          }
          orderText += `, Delivery: ${deliveryOption}`;
          const customerName = '';
          const customerPhone = '';
          orderText += ', Please confirm & reply with price/offer. Thanks!';

          const encodedText = encodeURIComponent(orderText);
          if (encodedText.length > 1900) {
              throw new Error('Order message too long for WhatsApp');
          }

          const selectedDevice = document.querySelector('input[name="device"]:checked').value;
          const isMobile = selectedDevice === 'mobile';
          const baseUrl = isMobile ? 'whatsapp://send' : 'https://wa.me';
          const whatsappUrl = `${baseUrl}?phone=7302562455&text=${encodedText}`;

          if (!isMobile) {
              navigator.clipboard.writeText(orderText).then(() => {
                  alert('Order copied to clipboard. Opening WhatsAppâ€”paste the text if it doesnâ€™t auto-fill.');
              }).catch(() => {
                  alert('Could not copy to clipboard. Please copy this: ' + orderText);
              });
          }

          const opened = window.open(whatsappUrl, '_blank');
          if (!opened) {
              throw new Error('Pop-up blocked. Please allow pop-ups or click again.');
          }

          console.log('WhatsApp URL:', whatsappUrl);
      });
    });

    function removeFromCart(item) {
      console.log("Removing:", item);
      let cart = JSON.parse(localStorage.getItem('cart')) || {};
      if (cart[item]) {
          delete cart[item];
          localStorage.setItem('cart', JSON.stringify(cart));
          location.reload();
      }
    }

    document.querySelector('.nav-toggle').addEventListener('click', () => {
      document.querySelector('.nav-dropdown').classList.toggle('active');
    });
  </script>
</body>
</html>
